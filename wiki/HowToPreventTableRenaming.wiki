#summary Read this entry to learn how you can prevent the plugin from renaming your tables

= Introduction =

As you may noticed, the plugin changes table names by simple algorithms. This works quite ok for english table names and if you respect a few naming conventions.

In some cases you don't want this behaviour e.g. when you use non english table names or table names with special naming conventions.

= Details =

To disable table renaming follow this description carefully:

=== 1. open the plugin within a normal text editor ===


=== 2. change the following code block ===
{{{
function singularizeTableName(s)

    -- is plural?
    if ( isPlural(s) ) then
        -- strip "s"
        s = string.sub(s, 1, #s - 1)

        -- we can't just strip the s without looking at the remaining English plural endings
        -- see http://en.wikipedia.org/wiki/English_plural

        -- if the table name ends with "e" ("coache", "hashe", "addresse", "buzze", "heroe", ...)
        if (    string.endswith(s, "che")
             or string.endswith(s, "she")
             or string.endswith(s, "sse")
             or string.endswith(s, "zze")
             or string.endswith(s, "oe") ) then

            -- strip an "e", too
            s = string.sub(s, 1, #s - 1)

        -- if table name ends with "ie"
        elseif ( string.endswith(s, "ie") ) then
            -- replace "ie" by a "y" ("countrie" -> "country", "hobbie" -> "hobby", ...)
            s = string.sub(s, 1, #s - 2) .. "y"

        elseif ( string.endswith(s, "ve") ) then
            -- replace "ve" by an "f" ("calve" -> "calf", "leave" -> "leaf", ...)
            s = string.sub(s, 1, #s - 2) .. "f"

            -- does *not* work for certain words ("knive" -> "knif", "stave" -> "staf", ...): TODO (hard)
        else
            -- do nothing ("game", "referee", "monkey", ...)

            -- note: table names like "Caches" can't be handled correctly because of the "che" rule above,
            -- that word however basically stems from French and might be considered a special case anyway
            -- also collective names like "Personnel", "Cast" (caution: SQL keyword!) can't be singularized
        end
    end

    return s
end
}}}

to

{{{
function singularizeTableName(s)
    return s
end
}}}


=== 3. change the following code block ===
{{{
function pluralizeTableName(s)

    -- is singular?
    if ( isSingular(s) ) then

        -- we can't just append the s without looking at the English singular endings
        -- see http://en.wikipedia.org/wiki/English_plural

        -- if the table name ends with "ch", "sh", "ss" or "zz" ("coach", "hash", "address", "buzz", "hero", ...)
        if (    string.endswith(s, "ch")
             or string.endswith(s, "sh")
             or string.endswith(s, "ss")
             or string.endswith(s, "zz")
             or string.endswith(s, "o") ) then

            -- append "es"
            s = s .. "es"

        -- if table name ends with "y"
        elseif ( string.endswith(s, "y") ) then
            -- replace "y" with "ies" ("country" -> "countries", "hobby" -> "hobbies", ...)
            s = string.sub(s, 1, #s - 1) .. "ies"

        elseif ( string.endswith(s, "f") ) then
            -- replace "f" by an "ves" ("leaf" -> "leaves", "half" -> "halves", ...)
            s = string.sub(s, 1, #s - 1) .. "ves"
        else
            -- append "s" ("games", "referees", "monkeys", ...)
            s = s .. "s"
        end
    end

    return s
end
}}}

to

{{{
function pluralizeTableName(s)
    return s
end
}}}


=== 4. add a custom foreignAlias prefix ===

to use a prefix for foreignAliases (in this sample we chose `col_` for collections) which where linked as `one-to-many` relations, change the following code block from

{{{
if ( foreignKey.many == 1 ) then
    fkReference = pluralizeTableName(tbl.name)
elseif ( foreignKey.many == 0 ) then
    fkReference = singularizeTableName(tbl.name)
}}}

to 

{{{
if ( foreignKey.many == 1 ) then
    fkReference = 'col_' .. pluralizeTableName(tbl.name)
elseif ( foreignKey.many == 0 ) then
    fkReference = singularizeTableName(tbl.name)
}}}